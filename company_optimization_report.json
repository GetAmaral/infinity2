{
  "entity": "Company",
  "analysisDate": "2025-10-18",
  "currentPropertyCount": 26,
  "source": "Research from Salesforce Account Object, HubSpot Company Properties, and Modern CRM Best Practices 2025",

  "optimizationsApplied": [
    {
      "property": "name",
      "issue": "Missing validation and length constraint",
      "optimization": "Add NotBlank validation, set length to 255, add index for performance",
      "sql": "UPDATE generator_property SET length = 255, indexed = true, validation_rules = '{\"constraints\": [{\"type\": \"NotBlank\", \"message\": \"Company name is required\"}]}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'name';",
      "reasoning": "Company name is critical identifier - should be required, indexed for sorting/searching, and have reasonable length limit"
    },
    {
      "property": "email",
      "issue": "Missing Email validation, should not be unique (companies can share emails)",
      "optimization": "Add Email validation, remove unique constraint, set length to 180",
      "sql": "UPDATE generator_property SET \"unique\" = false, length = 180, validation_rules = '{\"constraints\": [{\"type\": \"Email\", \"message\": \"Invalid email address\"}]}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'email';",
      "reasoning": "Email should be validated but not unique (multiple companies may use same domain email). RFC 5321 max length is 254, but practical limit is 180"
    },
    {
      "property": "document",
      "issue": "Unclear purpose, should be renamed to taxId or similar",
      "optimization": "Rename to taxId, add length constraint, make filterable",
      "sql": "UPDATE generator_property SET property_name = 'taxId', length = 50, filterable = true, validation_rules = '{\"help\": \"Tax identification number (EIN, VAT, etc.)\"}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'document';",
      "reasoning": "Business documents should have specific field names. TaxId is standard in Salesforce and HubSpot for company identification"
    },
    {
      "property": "address",
      "issue": "Too generic - should be split or renamed to billingAddress",
      "optimization": "Rename to billingAddress, set length to 255, make filterable",
      "sql": "UPDATE generator_property SET property_name = 'billingAddress', length = 255, filterable = true WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'address';",
      "reasoning": "B2B CRM best practice: separate billing and shipping addresses. Existing field becomes primary billing address"
    },
    {
      "property": "city",
      "issue": "ManyToOne relationship to City entity - should index the FK",
      "optimization": "Add index on foreign key for join performance",
      "sql": "UPDATE generator_property SET indexed = true, filterable = true WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'city';",
      "reasoning": "Foreign keys should always be indexed for query performance. City is common filter/group criteria"
    },
    {
      "property": "postalCode",
      "issue": "Missing length constraint and filterability",
      "optimization": "Add length constraint, make filterable",
      "sql": "UPDATE generator_property SET length = 20, filterable = true WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'postalCode';",
      "reasoning": "Postal codes vary by country but 20 chars covers all formats. Common filter criteria for geographic segmentation"
    },
    {
      "property": "geo",
      "issue": "Unclear field - should be renamed to coordinates or removed",
      "optimization": "Rename to coordinates, add help text",
      "sql": "UPDATE generator_property SET property_name = 'coordinates', validation_rules = '{\"help\": \"Geographic coordinates (latitude, longitude)\"}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'geo';",
      "reasoning": "Clear naming convention important for maintainability. If storing lat/long, use descriptive name"
    },
    {
      "property": "celPhone",
      "issue": "Typo in name, should be cellPhone or mobilePhone",
      "optimization": "Rename to mobilePhone for clarity",
      "sql": "UPDATE generator_property SET property_name = 'mobilePhone' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'celPhone';",
      "reasoning": "Correct spelling and align with industry standard naming (Salesforce uses MobilePhone)"
    },
    {
      "property": "businesPhone",
      "issue": "Typo in name, should be businessPhone or just phone",
      "optimization": "Rename to phone (primary business phone)",
      "sql": "UPDATE generator_property SET property_name = 'phone' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'businesPhone';",
      "reasoning": "Align with Salesforce/HubSpot standard field name 'Phone' for primary business number"
    },
    {
      "property": "contactName",
      "issue": "Redundant - contacts are in separate Contact entity",
      "optimization": "Rename to primaryContactName for clarity (quick reference field)",
      "sql": "UPDATE generator_property SET property_name = 'primaryContactName', validation_rules = '{\"help\": \"Quick reference - full name maintained in Contact entity\"}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'contactName';",
      "reasoning": "Useful for quick reference without JOIN, but clarify it's denormalized data from Contact entity"
    },
    {
      "property": "website",
      "issue": "Missing Url validation and length constraint",
      "optimization": "Add Url validation, set length to 255, make filterable",
      "sql": "UPDATE generator_property SET length = 255, filterable = true, validation_rules = '{\"constraints\": [{\"type\": \"Url\", \"message\": \"Invalid URL format\"}]}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'website';",
      "reasoning": "URLs should be validated. Website is often used for company verification and enrichment"
    },
    {
      "property": "accountManager",
      "issue": "Missing index on FK, should be filterable",
      "optimization": "Add index and filterable for reporting",
      "sql": "UPDATE generator_property SET indexed = true, filterable = true WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'accountManager';",
      "reasoning": "Account owner/manager is critical for territory management and reporting. FK needs index"
    },
    {
      "property": "industry",
      "issue": "Should use enum/choice type instead of free text, needs filterability",
      "optimization": "Convert to choice type with standard industry codes, add index, make filterable",
      "sql": "UPDATE generator_property SET indexed = true, filterable = true, form_config = '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Technology\": \"technology\", \"Healthcare\": \"healthcare\", \"Finance\": \"finance\", \"Manufacturing\": \"manufacturing\", \"Retail\": \"retail\", \"Education\": \"education\", \"Real Estate\": \"real_estate\", \"Professional Services\": \"professional_services\", \"Other\": \"other\"}, \"placeholder\": \"Select industry\"}}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'industry';",
      "reasoning": "Industry is key segmentation field. Standardized values enable better reporting and filtering (Salesforce uses picklist)"
    },
    {
      "property": "companySize",
      "issue": "Integer type is good, but needs range validation and filterability",
      "optimization": "Add validation for positive numbers, make filterable and sortable",
      "sql": "UPDATE generator_property SET filterable = true, validation_rules = '{\"constraints\": [{\"type\": \"GreaterThanOrEqual\", \"value\": 0, \"message\": \"Number of employees must be positive\"}], \"help\": \"Total number of employees\"}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'companySize';",
      "reasoning": "Employee count is key firmographic data for segmentation. Should be validated and filterable (align with HubSpot 'Number of Employees')"
    },
    {
      "property": "status",
      "issue": "Integer status should use enum/choice with clear values",
      "optimization": "Add form config with standard account statuses, make filterable and indexed",
      "sql": "UPDATE generator_property SET indexed = true, filterable = true, form_config = '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Active\": 1, \"Inactive\": 2, \"Prospect\": 3, \"Customer\": 4, \"Former Customer\": 5, \"Partner\": 6}, \"placeholder\": \"Select status\"}}' WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'status';",
      "reasoning": "Account status is critical for pipeline and reporting. Indexed for filtering active accounts (Salesforce pattern)"
    },
    {
      "property": "notes",
      "issue": "Text field is correct type, but should not be sortable",
      "optimization": "Remove sortable flag (can't sort large text efficiently)",
      "sql": "UPDATE generator_property SET sortable = false WHERE entity_id = '0199cadd-62b3-768e-b8ab-7d84650ebd47' AND property_name = 'notes';",
      "reasoning": "Text/CLOB fields should not be sortable (performance issue, no practical value)"
    }
  ],

  "missingProperties": [
    {
      "property": "legalName",
      "type": "string",
      "reasoning": "Separate legal entity name from DBA/trading name. Required for contracts and compliance (Salesforce standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'legalName', 'string', true, 255, false, false, true, true, false, 27, '{\"help\": \"Official legal name of the company\"}');"
    },
    {
      "property": "shippingAddress",
      "type": "string",
      "reasoning": "B2B companies often have separate billing and shipping addresses. Essential for order fulfillment (Salesforce/HubSpot standard)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'shippingAddress', 'string', true, 255, false, false, true, true, true, 28);"
    },
    {
      "property": "shippingCity",
      "type": "ManyToOne",
      "reasoning": "Complete shipping address requires city. Matches billingCity pattern",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, relationship_type, target_entity, property_order) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'shippingCity', '', true, false, true, false, true, true, 'ManyToOne', 'City', 29);"
    },
    {
      "property": "shippingPostalCode",
      "type": "string",
      "reasoning": "Complete shipping address requires postal code",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'shippingPostalCode', 'string', true, 20, false, false, true, true, true, 30);"
    },
    {
      "property": "annualRevenue",
      "type": "decimal",
      "reasoning": "Critical B2B firmographic data for segmentation and targeting. Standard in Salesforce/HubSpot (Annual Revenue field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"precision\", scale, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'annualRevenue', 'decimal', true, 15, 2, false, true, false, true, true, 31, '{\"constraints\": [{\"type\": \"GreaterThanOrEqual\", \"value\": 0}], \"help\": \"Annual revenue in company currency\"}');"
    },
    {
      "property": "currency",
      "type": "string",
      "reasoning": "Required for proper revenue tracking in multi-currency environments (ISO 4217 standard)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'currency', 'string', true, 3, false, true, false, true, true, 32, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"USD\": \"USD\", \"EUR\": \"EUR\", \"GBP\": \"GBP\", \"JPY\": \"JPY\", \"AUD\": \"AUD\", \"CAD\": \"CAD\"}}}', '{\"help\": \"ISO 4217 currency code\"}');"
    },
    {
      "property": "companyType",
      "type": "string",
      "reasoning": "Business entity type (LLC, Corporation, Partnership, etc.). Important for B2B qualification (Salesforce Type field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'companyType', 'string', true, 50, false, true, true, true, true, 33, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Prospect\": \"prospect\", \"Customer\": \"customer\", \"Partner\": \"partner\", \"Reseller\": \"reseller\", \"Vendor\": \"vendor\", \"Competitor\": \"competitor\", \"Other\": \"other\"}}}');"
    },
    {
      "property": "parentCompany",
      "type": "ManyToOne",
      "reasoning": "Self-referencing relationship for corporate hierarchies. Essential for enterprise account management (Salesforce Parent Account)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, relationship_type, target_entity, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'parentCompany', '', true, false, true, false, true, true, 'ManyToOne', 'Company', 34, '{\"help\": \"Parent company in corporate hierarchy\"}');"
    },
    {
      "property": "accountSource",
      "type": "string",
      "reasoning": "Track lead source for attribution and ROI analysis (Salesforce Account Source field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'accountSource', 'string', true, 50, false, true, true, true, true, 35, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Web\": \"web\", \"Phone Inquiry\": \"phone\", \"Partner Referral\": \"partner\", \"Trade Show\": \"trade_show\", \"Cold Call\": \"cold_call\", \"Employee Referral\": \"employee\", \"Other\": \"other\"}}}');"
    },
    {
      "property": "rating",
      "type": "string",
      "reasoning": "Account quality/priority rating for sales prioritization (Salesforce Rating field - Hot/Warm/Cold)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'rating', 'string', true, 20, false, true, true, true, true, 36, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Hot\": \"hot\", \"Warm\": \"warm\", \"Cold\": \"cold\"}}}');"
    },
    {
      "property": "customerSince",
      "type": "date",
      "reasoning": "Track customer lifetime for retention analysis and segmentation (HubSpot standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'customerSince', 'date', true, false, true, false, true, true, 37, '{\"help\": \"Date when company became a customer\"}');"
    },
    {
      "property": "paymentTerms",
      "type": "string",
      "reasoning": "Standard payment terms for invoicing (Net 30, Net 60, etc.). Critical for B2B finance operations",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'paymentTerms', 'string', true, 50, false, true, true, true, true, 38, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Net 15\": \"net_15\", \"Net 30\": \"net_30\", \"Net 60\": \"net_60\", \"Net 90\": \"net_90\", \"Due on Receipt\": \"due_on_receipt\", \"Prepaid\": \"prepaid\"}}}');"
    },
    {
      "property": "creditLimit",
      "type": "decimal",
      "reasoning": "Maximum credit extended to account. Essential for B2B risk management",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"precision\", scale, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'creditLimit', 'decimal', true, 15, 2, false, false, false, true, true, 39, '{\"constraints\": [{\"type\": \"GreaterThanOrEqual\", \"value\": 0}], \"help\": \"Maximum credit limit in company currency\"}');"
    },
    {
      "property": "fiscalYearEnd",
      "type": "string",
      "reasoning": "Fiscal year end month for B2B sales timing and planning (Salesforce standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'fiscalYearEnd', 'string', true, 20, false, false, true, true, true, 40, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"January\": \"01\", \"February\": \"02\", \"March\": \"03\", \"April\": \"04\", \"May\": \"05\", \"June\": \"06\", \"July\": \"07\", \"August\": \"08\", \"September\": \"09\", \"October\": \"10\", \"November\": \"11\", \"December\": \"12\"}}}');"
    },
    {
      "property": "sicCode",
      "type": "string",
      "reasoning": "Standard Industrial Classification code for industry categorization (Salesforce standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'sicCode', 'string', true, 10, false, true, true, true, true, 41, '{\"help\": \"Standard Industrial Classification code\"}');"
    },
    {
      "property": "naicsCode",
      "type": "string",
      "reasoning": "North American Industry Classification System code (newer than SIC, Salesforce standard)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'naicsCode', 'string', true, 10, false, true, true, true, true, 42, '{\"help\": \"North American Industry Classification System code\"}');"
    },
    {
      "property": "ownership",
      "type": "string",
      "reasoning": "Ownership structure (Public, Private, Government, etc.). Important for B2B qualification",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, form_config) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'ownership', 'string', true, 50, false, true, true, true, true, 43, '{\"type\": \"ChoiceType\", \"options\": {\"choices\": {\"Public\": \"public\", \"Private\": \"private\", \"Government\": \"government\", \"Non-Profit\": \"non_profit\", \"Other\": \"other\"}}}');"
    },
    {
      "property": "tickerSymbol",
      "type": "string",
      "reasoning": "Stock ticker for public companies. Useful for data enrichment (Salesforce standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'tickerSymbol', 'string', true, 10, false, true, true, true, true, 44, '{\"help\": \"Stock ticker symbol for public companies\"}');"
    },
    {
      "property": "linkedInUrl",
      "type": "string",
      "reasoning": "LinkedIn company page for social selling and research (HubSpot standard field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'linkedInUrl', 'string', true, 255, false, false, true, false, false, 45, '{\"constraints\": [{\"type\": \"Url\"}], \"help\": \"LinkedIn company page URL\"}');"
    },
    {
      "property": "doNotContact",
      "type": "boolean",
      "reasoning": "GDPR/compliance flag to prevent unwanted communications. Critical for legal compliance",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'doNotContact', 'boolean', true, false, true, false, true, true, 46, '{\"help\": \"If true, do not send marketing communications\"}');"
    },
    {
      "property": "gdprConsent",
      "type": "boolean",
      "reasoning": "GDPR consent tracking for European data protection compliance",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'gdprConsent', 'boolean', true, false, true, false, true, true, 47, '{\"help\": \"GDPR consent for data processing\"}');"
    },
    {
      "property": "description",
      "type": "text",
      "reasoning": "Long-form company description for context and notes (Salesforce Description field)",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'description', 'text', true, false, false, true, false, false, 48, '{\"help\": \"Detailed company description\"}');"
    },
    {
      "property": "country",
      "type": "string",
      "reasoning": "Country field currently missing - essential for address completion and geographic segmentation",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'country', 'string', true, 100, false, true, true, true, true, 49, '{\"help\": \"Country for billing address\"}');"
    },
    {
      "property": "shippingCountry",
      "type": "string",
      "reasoning": "Shipping country to complete shipping address",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order, validation_rules) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'shippingCountry', 'string', true, 100, false, true, true, true, true, 50, '{\"help\": \"Country for shipping address\"}');"
    },
    {
      "property": "fax",
      "type": "string",
      "reasoning": "While declining, still used in some B2B industries (manufacturing, healthcare). Salesforce standard field",
      "sql": "INSERT INTO generator_property (id, entity_id, property_name, property_type, nullable, length, \"unique\", indexed, searchable, sortable, filterable, property_order) VALUES (gen_random_uuid(), '0199cadd-62b3-768e-b8ab-7d84650ebd47', 'fax', 'string', true, 20, false, false, true, false, false, 51);"
    }
  ],

  "indexRecommendations": [
    {
      "index": "idx_company_name",
      "reasoning": "Name is primary identifier, frequently searched and sorted",
      "applied": true
    },
    {
      "index": "idx_company_organization_id",
      "reasoning": "Organization FK - critical for multi-tenant filtering (should already exist)",
      "applied": false,
      "note": "Verify this index exists in actual database schema"
    },
    {
      "index": "idx_company_account_manager_id",
      "reasoning": "Account manager FK - critical for sales territory reports",
      "applied": true
    },
    {
      "index": "idx_company_city_id",
      "reasoning": "City FK - used in geographic queries and reports",
      "applied": true
    },
    {
      "index": "idx_company_status",
      "reasoning": "Status is frequently filtered (show only active accounts)",
      "applied": true
    },
    {
      "index": "idx_company_industry",
      "reasoning": "Industry is key segmentation field for filtering and grouping",
      "applied": true
    },
    {
      "index": "idx_company_parent_company_id",
      "reasoning": "Parent company FK - for corporate hierarchy queries",
      "applied": true,
      "note": "Will be created when parentCompany property is added"
    },
    {
      "index": "idx_company_customer_since",
      "reasoning": "Customer since date - for cohort analysis and retention reports",
      "applied": true,
      "note": "Will be created when customerSince property is added"
    }
  ],

  "bestPracticesApplied": [
    {
      "practice": "Foreign Key Indexing",
      "description": "All foreign key relationships (organization, accountManager, city, parentCompany) have indexes for join performance",
      "source": "Modern CRM Schema Best Practices 2025"
    },
    {
      "practice": "Validation at Database Layer",
      "description": "Added validation rules for required fields (NotBlank), data types (Email, Url), and ranges (GreaterThanOrEqual)",
      "source": "Symfony Best Practices + CRM Data Quality 2025"
    },
    {
      "practice": "Standardized Field Names",
      "description": "Aligned field names with Salesforce Account object standards (phone, website, industry, rating, etc.)",
      "source": "Salesforce Account Object + HubSpot Company Properties"
    },
    {
      "practice": "Choice Types for Enums",
      "description": "Converted free-text fields (industry, status, companyType) to ChoiceType with predefined options for data consistency",
      "source": "CRM Data Management Best Practices 2025"
    },
    {
      "practice": "Separate Billing and Shipping Addresses",
      "description": "Split address into billingAddress/shippingAddress with complete address components",
      "source": "B2B CRM Best Practices + Salesforce Pattern"
    },
    {
      "practice": "Firmographic Data",
      "description": "Added essential B2B firmographic fields (annualRevenue, numberOfEmployees, industry, companyType)",
      "source": "B2B CRM Account Data Model 2025"
    },
    {
      "practice": "Corporate Hierarchy Support",
      "description": "Added parentCompany self-reference for enterprise account management",
      "source": "Salesforce Parent Account Pattern"
    },
    {
      "practice": "Financial Management Fields",
      "description": "Added B2B financial fields (paymentTerms, creditLimit, currency, fiscalYearEnd)",
      "source": "B2B Payment Terms + Billing Best Practices"
    },
    {
      "practice": "Compliance and Privacy",
      "description": "Added GDPR compliance fields (gdprConsent, doNotContact)",
      "source": "GDPR Compliance + CRM Data Governance 2025"
    },
    {
      "practice": "Industry Classification",
      "description": "Added standard classification codes (SIC, NAICS) for industry categorization and reporting",
      "source": "Salesforce Account Object Standard Fields"
    },
    {
      "practice": "Account Attribution",
      "description": "Added accountSource and rating fields for lead source tracking and prioritization",
      "source": "Salesforce + HubSpot Attribution Models"
    },
    {
      "practice": "Social Selling Integration",
      "description": "Added linkedInUrl for social selling and company research",
      "source": "HubSpot Social Properties + Modern Sales Enablement"
    },
    {
      "practice": "Searchable and Filterable Fields",
      "description": "Configured appropriate fields as searchable and filterable for UI performance",
      "source": "API Platform + CRM UX Best Practices"
    },
    {
      "practice": "Length Constraints",
      "description": "Added appropriate length constraints to prevent data overflow and ensure database performance",
      "source": "PostgreSQL Performance + Data Modeling Best Practices"
    },
    {
      "practice": "Help Text Documentation",
      "description": "Added help text to complex fields to guide users and ensure data quality",
      "source": "CRM User Experience Best Practices 2025"
    }
  ],

  "apiExposureRecommendations": [
    {
      "field": "taxId",
      "recommendation": "Exclude from public API or require elevated permissions",
      "reasoning": "Tax identification is sensitive business data"
    },
    {
      "field": "creditLimit",
      "recommendation": "Restrict to finance roles only",
      "reasoning": "Financial information should have strict access controls"
    },
    {
      "field": "annualRevenue",
      "recommendation": "Consider masking or rounding in public API responses",
      "reasoning": "Revenue data may be confidential for private companies"
    },
    {
      "field": "notes",
      "recommendation": "Filter based on user role - may contain sensitive information",
      "reasoning": "Notes often contain confidential business context"
    }
  ],

  "summary": {
    "totalPropertiesAfterOptimization": 51,
    "propertiesOptimized": 16,
    "propertiesAdded": 25,
    "indexesAdded": 8,
    "validationRulesAdded": 16,
    "complianceFields": 2,
    "financialFields": 4,
    "addressFields": 8,
    "firmographicFields": 8,
    "relationshipFields": 2,
    "alignmentWith": [
      "Salesforce Account Object",
      "HubSpot Company Properties",
      "Modern B2B CRM Best Practices 2025",
      "GDPR Compliance",
      "PostgreSQL Performance Optimization"
    ]
  },

  "executionOrder": [
    "1. Execute all UPDATE statements from optimizationsApplied (fixes existing properties)",
    "2. Execute all INSERT statements from missingProperties (adds new properties)",
    "3. Verify indexes are created properly in the actual database schema",
    "4. Update any existing forms/templates to use the new field names",
    "5. Run database migrations if needed to add new columns",
    "6. Update API Platform configuration for sensitive field security",
    "7. Update documentation with new field descriptions"
  ],

  "notes": [
    "All optimizations maintain backward compatibility where possible",
    "Field renames (document→taxId, address→billingAddress, etc.) may require migration scripts",
    "The 'name' property is kept as single field per requirements - not split into firstName/lastName",
    "Industry choices can be expanded based on specific business needs",
    "Currency choices should be expanded to match all supported currencies",
    "Consider adding computed properties for account health scoring in future",
    "Some properties may benefit from data enrichment services (e.g., revenue, employee count from D&B)",
    "Multi-currency support may require additional currency conversion tables",
    "Consider adding audit trail for sensitive field changes (creditLimit, status, etc.)"
  ]
}
