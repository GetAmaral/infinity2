# ========================================
# LUMINAI - PRODUCTION ENVIRONMENT
# ========================================
# Copy this file to .env.prod and update all values
# NEVER commit .env.prod to git!
# ========================================

# ========================================
# DATABASE CONFIGURATION
# ========================================
# IMPORTANT: Generate strong passwords!
# Use: openssl rand -base64 24

POSTGRES_DB=luminai_db
POSTGRES_USER=luminai_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_32_CHARS

DATABASE_URL="postgresql://luminai_user:CHANGE_ME_PASSWORD@database:5432/luminai_db?serverVersion=18&charset=utf8"

# ========================================
# APPLICATION CONFIGURATION
# ========================================
# IMPORTANT: Generate new APP_SECRET for production!
# Use: openssl rand -hex 32

APP_ENV=prod
APP_DEBUG=0
APP_SECRET=CHANGE_ME_64_CHARACTER_RANDOM_HEX_STRING

# ========================================
# FRANKENPHP CONFIGURATION
# ========================================
# Recommended: 8 threads for production (CPX31+)
# Adjust based on your server specs:
# - CPX21 (4GB RAM): 4-6 threads
# - CPX31 (8GB RAM): 6-8 threads
# - CPX41 (16GB RAM): 8-12 threads

FRANKENPHP_NUM_THREADS=8

# ========================================
# DOMAIN CONFIGURATION
# ========================================
# Update with your actual domain

DEFAULT_URI=https://your-domain.com

# ========================================
# REDIS CONFIGURATION
# ========================================

REDIS_URL=redis://redis:6379/0

# Optional: Add Redis password for additional security
# REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ========================================
# MESSENGER (Async Processing)
# ========================================

MESSENGER_TRANSPORT_DSN=doctrine://default?auto_setup=0

# ========================================
# MAILER CONFIGURATION
# ========================================
# Update with your SMTP service (SendGrid, Mailgun, AWS SES, etc.)
# Examples:
# - Gmail: smtp://username:password@smtp.gmail.com:587
# - SendGrid: smtp://apikey:YOUR_API_KEY@smtp.sendgrid.net:587
# - Mailgun: smtp://username:password@smtp.mailgun.org:587
# - AWS SES: ses+smtp://USERNAME:PASSWORD@default

MAILER_DSN=smtp://username:password@smtp.example.com:587

# Optional: Configure mailer sender
# MAILER_FROM=noreply@your-domain.com

# ========================================
# CORS CONFIGURATION
# ========================================
# Update with your domain pattern

CORS_ALLOW_ORIGIN="^https?://(your-domain\.com|.*\.your-domain\.com)(:[0-9]+)?$"

# ========================================
# SECURITY CONFIGURATION
# ========================================

SECURITY_RATE_LIMIT_ENABLED=true
SECURITY_MONITORING_ENABLED=true

# ========================================
# PERFORMANCE CONFIGURATION
# ========================================

CACHE_ENABLED=true
OPCACHE_ENABLED=true

# OPcache Production Settings
OPCACHE_VALIDATE_TIMESTAMPS=0
OPCACHE_MAX_ACCELERATED_FILES=20000
OPCACHE_MEMORY_CONSUMPTION=256
OPCACHE_INTERNED_STRINGS_BUFFER=16

# Realpath Cache Settings
REALPATH_CACHE_SIZE=4096K
REALPATH_CACHE_TTL=600

# ========================================
# OPTIONAL: MONITORING & LOGGING
# ========================================

# External monitoring service API keys (if applicable)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project
# NEW_RELIC_LICENSE_KEY=your-key-here
# DATADOG_API_KEY=your-key-here

# ========================================
# DEPLOYMENT INFORMATION
# ========================================
# Document your deployment for reference

# Deployment Date: _______________
# VPS Provider: Hetzner Cloud
# VPS IP: _______________
# Domain: _______________
# SSL: Let's Encrypt (auto-renewal)
# Deployed By: _______________

# ========================================
# PRODUCTION CHECKLIST
# ========================================
# Before deploying, ensure:
# [ ] All CHANGE_ME values updated
# [ ] Strong passwords generated (32+ characters)
# [ ] APP_SECRET is unique 64-char random hex
# [ ] Domain configured in DNS
# [ ] SSL certificates obtained
# [ ] nginx config updated with domain
# [ ] docker-compose.yml ports secured
# [ ] Backups configured
# [ ] Monitoring enabled
# [ ] .env.prod added to .gitignore
# ========================================
