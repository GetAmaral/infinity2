{# Custom Luminai Form Theme - Light/Dark Responsive #}

{% use 'bootstrap_5_layout.html.twig' %}

{# Form row with modern Luminai styling #}
{% block form_row -%}
    <div class="form-group-modern mb-3{% if errors|length > 0 %} has-error{% endif %}">
        {{- form_label(form) -}}
        {{- form_widget(form) -}}
        {{- form_errors(form) -}}
        {% if help is defined and help is not empty %}
            <small class="form-text text-muted mt-1 d-block">
                <i class="bi bi-info-circle me-1"></i>
                {{ help|trans({}, translation_domain) }}
            </small>
        {% endif %}
    </div>
{%- endblock form_row %}

{# Form label #}
{% block form_label -%}
    {% if label is not same as(false) -%}
        <label class="form-label-modern{% if required %} required{% endif %}"
               {% if label_attr %}{% with { attr: label_attr } %}{{ block('attributes') }}{% endwith %}{% endif %}>
            {% if translation_domain is same as(false) -%}
                {{ label }}
            {%- else -%}
                {{ label|trans(label_translation_parameters, translation_domain) }}
            {%- endif %}
        </label>
    {%- endif %}
{%- endblock form_label %}

{# Text inputs #}
{% block form_widget_simple -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' form-input-modern' ~ (errors|length > 0 ? ' is-invalid' : ''))|trim
    }) %}
    {{- parent() -}}
{%- endblock form_widget_simple %}

{# Textarea #}
{% block textarea_widget -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' form-input-modern' ~ (errors|length > 0 ? ' is-invalid' : ''))|trim,
        'rows': attr.rows|default(3)
    }) %}
    {{- parent() -}}
{%- endblock textarea_widget %}

{# Select #}
{% block choice_widget_collapsed -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' form-input-modern' ~ (errors|length > 0 ? ' is-invalid' : ''))|trim
    }) %}
    {{- parent() -}}
{%- endblock choice_widget_collapsed %}

{# Checkbox #}
{% block checkbox_widget -%}
    <div class="form-check">
        <input type="checkbox" {{ block('widget_attributes') }}
               class="form-check-input{% if errors|length > 0 %} is-invalid{% endif %}"
               {% if value is defined %}value="{{ value }}"{% endif %}
               {% if checked %}checked="checked"{% endif %} />
        <label class="form-check-label" for="{{ id }}">
            {{ label|trans({}, translation_domain) }}
        </label>
    </div>
{%- endblock checkbox_widget %}

{# Error display #}
{% block form_errors -%}
    {% if errors|length > 0 -%}
        <div class="form-errors mt-2 p-2" style="background: rgba(239, 68, 68, 0.1); border-left: 3px solid #dc2626; border-radius: 4px;">
            <ul class="list-unstyled mb-0">
                {%- for error in errors -%}
                    <li style="color: #dc2626; font-size: 0.875rem; font-weight: 500; padding: 0.25rem 0;">
                        <i class="bi bi-exclamation-circle-fill me-1"></i>
                        {{ error.message }}
                    </li>
                {%- endfor -%}
            </ul>
        </div>
    {%- endif %}
{%- endblock form_errors %}
