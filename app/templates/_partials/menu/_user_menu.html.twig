{#
/**
 * User Profile Menu Template
 *
 * Renders the user profile dropdown menu items
 *
 * @param array menu_items - Filtered menu items from NavigationConfig
 */
#}
{% set last_was_divider = false %}

{% for key, item in menu_items %}
    {# Skip if this is just a divider config without a route #}
    {% if item.divider_before is defined and item.route is not defined %}
        {# Render divider only if we haven't just rendered one #}
        {% if not last_was_divider %}
            {% include '_partials/menu/_menu_divider.html.twig' %}
            {% set last_was_divider = true %}
        {% endif %}
    {% else %}
        {# Handle divider before a menu item #}
        {% if item.divider_before is defined and item.divider_before and not last_was_divider %}
            {% include '_partials/menu/_menu_divider.html.twig' %}
            {% set last_was_divider = true %}
        {% endif %}

        {# Render menu item if it has a route #}
        {% if item.route is defined %}
            {% include '_partials/menu/_menu_item.html.twig' with {
                route: item.route,
                icon: item.icon|default('bi-circle'),
                label: item.label,
                translation_domain: item.translation_domain|default('messages'),
                css_class: item.css_class|default(null),
                id: key == 'logout' ? 'logoutLink' : null
            } %}
            {% set last_was_divider = false %}
        {% endif %}
    {% endif %}
{% endfor %}
