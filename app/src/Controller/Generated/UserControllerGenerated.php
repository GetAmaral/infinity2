<?php

declare(strict_types=1);

namespace App\Controller\Generated;

use App\Controller\Base\BaseApiController;
use App\Entity\User;
use App\Repository\UserRepository;
use App\Security\Voter\UserVoter;
use App\Form\UserType;
use App\Service\ListPreferencesService;
use Doctrine\ORM\EntityManagerInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\Security\Csrf\CsrfToken;
use Symfony\Component\Security\Csrf\CsrfTokenManagerInterface;
use Symfony\Component\Security\Core\Exception\InvalidCsrfTokenException;
use Symfony\Contracts\Translation\TranslatorInterface;

/**
 * Generated Base Controller for User
 *
 * ⚠️ WARNING: This file is ALWAYS regenerated by Genmax
 * DO NOT EDIT THIS FILE - Edit UserController instead
 *
 * @generated
 * @codeCoverageIgnore
 */
abstract class UserControllerGenerated extends BaseApiController
{
    public function __construct(
        protected readonly EntityManagerInterface $entityManager,
        protected readonly UserRepository $repository,
        protected readonly ListPreferencesService $listPreferencesService,
        protected readonly TranslatorInterface $translator,
        protected readonly CsrfTokenManagerInterface $csrfTokenManager,
    ) {}

    // ====================================
    // ABSTRACT METHOD IMPLEMENTATIONS
    // ====================================

    /**
     * Get the repository for this entity
     */
    protected function getRepository(): UserRepository
    {
        return $this->repository;
    }

    /**
     * Get the plural name for this entity
     */
    protected function getEntityPluralName(): string
    {
        return 'users';
    }

    /**
     * Convert entity to array for API responses
     *
     * ⚠️ IMPORTANT: Enum Properties Stored as Strings
     * -------------------------------------------------
     * Properties with enum-backed types (like InputType) are stored as STRINGS
     * in the database and getters return strings directly, NOT enum objects.
     *
     * ❌ WRONG:   $entity->getType()->value   (Error: "Attempt to read property 'value' on string")
     * ✅ CORRECT: $entity->getType()          (Already a string - 'fully_completed')
     *
     * If you need the enum object for business logic, use:
     *    InputType::from($entity->getType())
     */
    protected function entityToArray(object $entity): array
    {
        if (!$entity instanceof User) {
            throw new \InvalidArgumentException('Expected User instance');
        }

        return [
            'id' => $entity->getId()->toString(),
            'organization' => ($organizationRel = $entity->getOrganization()) ? [
                'id' => $organizationRel->getId()->toString(),
                'display' => (string) $organizationRel,
            ] : null,
            'name' => $entity->getName(),
            'agents' => ($agentsRel = $entity->getAgents()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $agentsRel->toArray()
            ) : [],
            'active' => $entity->getActive(),
            'avatarUrl' => $entity->getAvatarUrl(),
            'birthDate' => $entity->getBirthDate(),
            'calendars' => ($calendarsRel = $entity->getCalendars()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $calendarsRel->toArray()
            ) : [],
            'campaigns' => ($campaignsRel = $entity->getCampaigns()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $campaignsRel->toArray()
            ) : [],
            'celPhone' => $entity->getCelPhone(),
            'contacts' => ($contactsRel = $entity->getContacts()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $contactsRel->toArray()
            ) : [],
            'deals' => ($dealsRel = $entity->getDeals()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $dealsRel->toArray()
            ) : [],
            'email' => $entity->getEmail(),
            'emailVerifiedAt' => $entity->getEmailVerifiedAt()?->format('M d, Y'),
            'grantedRoles' => ($grantedRolesRel = $entity->getGrantedRoles()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $grantedRolesRel->toArray()
            ) : [],
            'calendarExternalLinks' => ($calendarExternalLinksRel = $entity->getCalendarExternalLinks()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $calendarExternalLinksRel->toArray()
            ) : [],
            'resourceBookings' => ($resourceBookingsRel = $entity->getResourceBookings()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $resourceBookingsRel->toArray()
            ) : [],
            'ownedDeals' => ($ownedDealsRel = $entity->getOwnedDeals()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $ownedDealsRel->toArray()
            ) : [],
            'eventAttendances' => ($eventAttendancesRel = $entity->getEventAttendances()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $eventAttendancesRel->toArray()
            ) : [],
            'verified' => $entity->getVerified(),
            'termsSigned' => $entity->getTermsSigned(),
            'termsSignedAt' => $entity->getTermsSignedAt()?->format('M d, Y'),
            'verificationToken' => $entity->getVerificationToken(),
            'apiToken' => $entity->getApiToken(),
            'failedLoginAttempts' => $entity->getFailedLoginAttempts(),
            'apiTokenExpiresAt' => $entity->getApiTokenExpiresAt()?->format('M d, Y'),
            'openAiApiKey' => $entity->getOpenAiApiKey(),
            'lastLoginAt' => $entity->getLastLoginAt()?->format('M d, Y'),
            'gender' => $entity->getGender(),
            'lockedUntil' => $entity->getLockedUntil()?->format('M d, Y'),
            'uiSettings' => $entity->getUiSettings(),
            'listPreferences' => $entity->getListPreferences(),
            'twoFactorEnabled' => $entity->getTwoFactorEnabled(),
            'lastPasswordChange' => $entity->getLastPasswordChange()?->format('M d, Y'),
            'twoFactorSecret' => $entity->getTwoFactorSecret(),
            'twoFactorBackupCodes' => $entity->getTwoFactorBackupCodes(),
            'passwordResetToken' => $entity->getPasswordResetToken(),
            'passwordResetExpiry' => $entity->getPasswordResetExpiry()?->format('M d, Y'),
            'sessionToken' => $entity->getSessionToken(),
            'lastPasswordChangeAt' => $entity->getLastPasswordChangeAt()?->format('M d, Y'),
            'passwordExpiresAt' => $entity->getPasswordExpiresAt()?->format('M d, Y'),
            'mustChangePassword' => $entity->getMustChangePassword(),
            'passkeyEnabled' => $entity->getPasskeyEnabled(),
            'managedCampaigns' => ($managedCampaignsRel = $entity->getManagedCampaigns()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $managedCampaignsRel->toArray()
            ) : [],
            'passkeyCredentials' => $entity->getPasskeyCredentials(),
            'ownedCampaigns' => ($ownedCampaignsRel = $entity->getOwnedCampaigns()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $ownedCampaignsRel->toArray()
            ) : [],
            'managedCompanies' => ($managedCompaniesRel = $entity->getManagedCompanies()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $managedCompaniesRel->toArray()
            ) : [],
            'managedContacts' => ($managedContactsRel = $entity->getManagedContacts()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $managedContactsRel->toArray()
            ) : [],
            'username' => $entity->getUsername(),
            'managedDeals' => ($managedDealsRel = $entity->getManagedDeals()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $managedDealsRel->toArray()
            ) : [],
            'phone' => $entity->getPhone(),
            'mobilePhone' => $entity->getMobilePhone(),
            'jobTitle' => $entity->getJobTitle(),
            'department' => $entity->getDepartment(),
            'timezone' => $entity->getTimezone(),
            'locale' => $entity->getLocale(),
            'preferredLanguage' => $entity->getPreferredLanguage(),
            'emailSignature' => $entity->getEmailSignature(),
            'emailNotificationsEnabled' => $entity->getEmailNotificationsEnabled(),
            'smsNotificationsEnabled' => $entity->getSmsNotificationsEnabled(),
            'calendarSyncEnabled' => $entity->getCalendarSyncEnabled(),
            'workingHours' => $entity->getWorkingHours(),
            'defaultCurrency' => $entity->getDefaultCurrency(),
            'dateFormat' => $entity->getDateFormat(),
            'manager' => ($managerRel = $entity->getManager()) ? [
                'id' => $managerRel->getId()->toString(),
                'display' => (string) $managerRel,
            ] : null,
            'organizedEvents' => ($organizedEventsRel = $entity->getOrganizedEvents()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $organizedEventsRel->toArray()
            ) : [],
            'salesTeam' => $entity->getSalesTeam(),
            'quotaAmount' => $entity->getQuotaAmount(),
            'commissionRate' => $entity->getCommissionRate(),
            'agent' => $entity->getAgent(),
            'agentType' => $entity->getAgentType(),
            'ownedCourses' => ($ownedCoursesRel = $entity->getOwnedCourses()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $ownedCoursesRel->toArray()
            ) : [],
            'deletedAt' => $entity->getDeletedAt()?->format('M d, Y'),
            'avatar' => $entity->getAvatar(),
            'title' => $entity->getTitle(),
            'password' => $entity->getPassword(),
            'firstName' => $entity->getFirstName(),
            'lastName' => $entity->getLastName(),
            'middleName' => $entity->getMiddleName(),
            'suffix' => $entity->getSuffix(),
            'nickname' => $entity->getNickname(),
            'position' => $entity->getPosition(),
            'secondaryEmail' => $entity->getSecondaryEmail(),
            'workPhone' => $entity->getWorkPhone(),
            'homePhone' => $entity->getHomePhone(),
            'phoneExtension' => $entity->getPhoneExtension(),
            'fax' => $entity->getFax(),
            'website' => $entity->getWebsite(),
            'linkedinUrl' => $entity->getLinkedinUrl(),
            'twitterHandle' => $entity->getTwitterHandle(),
            'profilePictureUrl' => $entity->getProfilePictureUrl(),
            'address' => $entity->getAddress(),
            'city' => $entity->getCity(),
            'state' => $entity->getState(),
            'postalCode' => $entity->getPostalCode(),
            'country' => $entity->getCountry(),
            'region' => $entity->getRegion(),
            'officeLocation' => $entity->getOfficeLocation(),
            'employeeId' => $entity->getEmployeeId(),
            'profiles' => ($profilesRel = $entity->getProfiles()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $profilesRel->toArray()
            ) : [],
            'hireDate' => $entity->getHireDate(),
            'terminationDate' => $entity->getTerminationDate(),
            'employmentStatus' => $entity->getEmploymentStatus(),
            'costCenter' => $entity->getCostCenter(),
            'division' => $entity->getDivision(),
            'businessUnit' => $entity->getBusinessUnit(),
            'salary' => $entity->getSalary(),
            'salaryFrequency' => $entity->getSalaryFrequency(),
            'socialMedias' => ($socialMediasRel = $entity->getSocialMedias()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $socialMediasRel->toArray()
            ) : [],
            'skills' => $entity->getSkills(),
            'certifications' => $entity->getCertifications(),
            'languages' => $entity->getLanguages(),
            'bio' => $entity->getBio(),
            'notes' => $entity->getNotes(),
            'tags' => $entity->getTags(),
            'loginCount' => $entity->getLoginCount(),
            'studentCourses' => ($studentCoursesRel = $entity->getStudentCourses()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $studentCoursesRel->toArray()
            ) : [],
            'lastIpAddress' => $entity->getLastIpAddress(),
            'lastUserAgent' => $entity->getLastUserAgent(),
            'visible' => $entity->getVisible(),
            'profileCompleteness' => $entity->getProfileCompleteness(),
            'lastActivityAt' => $entity->getLastActivityAt()?->format('M d, Y'),
            'status' => $entity->getStatus(),
            'talks' => ($talksRel = $entity->getTalks()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $talksRel->toArray()
            ) : [],
            'statusMessage' => $entity->getStatusMessage(),
            'tasks' => ($tasksRel = $entity->getTasks()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $tasksRel->toArray()
            ) : [],
            'locked' => $entity->getLocked(),
            'lockedReason' => $entity->getLockedReason(),
            'lockedAt' => $entity->getLockedAt()?->format('M d, Y'),
            'customFields' => $entity->getCustomFields(),
            'managedPipelines' => ($managedPipelinesRel = $entity->getManagedPipelines()) ? array_map(
                fn($item) => [
                    'id' => $item->getId()->toString(),
                    'display' => (string) $item,
                ],
                $managedPipelinesRel->toArray()
            ) : [],
        ];
    }

    // ====================================
    // INDEX ACTION - List all Users
    // ====================================

    /**
     * List Users
     */
    protected function indexAction(): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::LIST);

        $preferences = $this->listPreferencesService->getEntityPreferences('users');
        $savedView = $preferences['view'] ?? 'grid';

        return $this->render('user/index.html.twig', [
            'entities' => [],  // Loaded via API
            'entity_name' => 'user',
            'entity_name_plural' => 'users',
            'page_icon' => 'bi-person-circle',
            'default_view' => $savedView,

            // List configuration from GeneratorProperty
            'enable_search' => true,
            'enable_filters' => false,
            'enable_sorting' => true,
            'enable_create_button' => true,
            'create_permission' => UserVoter::CREATE,

            // Property metadata for Twig templates (as PHP arrays)
            'listProperties' => json_decode('[{"name":"name","label":"Name","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getName","isRelationship":false},{"name":"agents","label":"Agents","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgents","isRelationship":true},{"name":"active","label":"Active","type":"boolean","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getActive","isRelationship":false},{"name":"avatarUrl","label":"AvatarUrl","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAvatarUrl","isRelationship":false},{"name":"birthDate","label":"BirthDate","type":"date_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getBirthDate","isRelationship":false},{"name":"calendars","label":"Calendars","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCalendars","isRelationship":true},{"name":"campaigns","label":"Campaigns","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCampaigns","isRelationship":true},{"name":"celPhone","label":"CelPhone","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCelPhone","isRelationship":false},{"name":"contacts","label":"Contacts","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getContacts","isRelationship":true},{"name":"deals","label":"Deals","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDeals","isRelationship":true},{"name":"email","label":"Email","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmail","isRelationship":false},{"name":"emailVerifiedAt","label":"EmailVerifiedAt","type":"datetime_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmailVerifiedAt","isRelationship":false},{"name":"grantedRoles","label":"Granted Roles","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getGrantedRoles","isRelationship":true},{"name":"eventAttendances","label":"EventAttendances","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEventAttendances","isRelationship":true},{"name":"verified","label":"Verified","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getVerified","isRelationship":false},{"name":"termsSigned","label":"Terms Signed","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTermsSigned","isRelationship":false},{"name":"termsSignedAt","label":"Terms Signed At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTermsSignedAt","isRelationship":false},{"name":"lastLoginAt","label":"Last Login At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastLoginAt","isRelationship":false},{"name":"gender","label":"Gender","type":"integer","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getGender","isRelationship":false},{"name":"lockedUntil","label":"Locked Until","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLockedUntil","isRelationship":false},{"name":"twoFactorEnabled","label":"Two Factor Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTwoFactorEnabled","isRelationship":false},{"name":"lastPasswordChange","label":"LastPasswordChange","type":"datetime_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastPasswordChange","isRelationship":false},{"name":"lastPasswordChangeAt","label":"Last Password Change At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastPasswordChangeAt","isRelationship":false},{"name":"passwordExpiresAt","label":"Password Expires At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPasswordExpiresAt","isRelationship":false},{"name":"mustChangePassword","label":"Must Change Password","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMustChangePassword","isRelationship":false},{"name":"passkeyEnabled","label":"Passkey Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPasskeyEnabled","isRelationship":false},{"name":"managedCampaigns","label":"ManagedCampaigns","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedCampaigns","isRelationship":true},{"name":"ownedCampaigns","label":"OwnedCampaigns","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOwnedCampaigns","isRelationship":true},{"name":"managedCompanies","label":"ManagedCompanies","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedCompanies","isRelationship":true},{"name":"managedContacts","label":"ManagedContacts","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedContacts","isRelationship":true},{"name":"username","label":"Username","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getUsername","isRelationship":false},{"name":"managedDeals","label":"ManagedDeals","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedDeals","isRelationship":true},{"name":"phone","label":"Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPhone","isRelationship":false},{"name":"mobilePhone","label":"Mobile Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMobilePhone","isRelationship":false},{"name":"jobTitle","label":"Job Title","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getJobTitle","isRelationship":false},{"name":"department","label":"Department","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDepartment","isRelationship":false},{"name":"timezone","label":"Timezone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTimezone","isRelationship":false},{"name":"locale","label":"Locale","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLocale","isRelationship":false},{"name":"preferredLanguage","label":"Preferred Language","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPreferredLanguage","isRelationship":false},{"name":"emailNotificationsEnabled","label":"Email Notifications Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmailNotificationsEnabled","isRelationship":false},{"name":"smsNotificationsEnabled","label":"SMS Notifications Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSmsNotificationsEnabled","isRelationship":false},{"name":"calendarSyncEnabled","label":"Calendar Sync Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCalendarSyncEnabled","isRelationship":false},{"name":"defaultCurrency","label":"Default Currency","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDefaultCurrency","isRelationship":false},{"name":"dateFormat","label":"Date Format","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDateFormat","isRelationship":false},{"name":"manager","label":"Manager","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManager","isRelationship":true},{"name":"organizedEvents","label":"OrganizedEvents","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOrganizedEvents","isRelationship":true},{"name":"salesTeam","label":"Sales Team","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSalesTeam","isRelationship":false},{"name":"quotaAmount","label":"Quota Amount","type":"decimal","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getQuotaAmount","isRelationship":false},{"name":"commissionRate","label":"Commission Rate","type":"decimal","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCommissionRate","isRelationship":false},{"name":"agent","label":"Agent","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgent","isRelationship":false},{"name":"agentType","label":"Agent Type","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgentType","isRelationship":false},{"name":"ownedCourses","label":"OwnedCourses","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOwnedCourses","isRelationship":true},{"name":"deletedAt","label":"Deleted At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDeletedAt","isRelationship":false},{"name":"avatar","label":"Avatar","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAvatar","isRelationship":false},{"name":"title","label":"Title","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTitle","isRelationship":false},{"name":"firstName","label":"First Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getFirstName","isRelationship":false},{"name":"lastName","label":"Last Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastName","isRelationship":false},{"name":"middleName","label":"Middle Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMiddleName","isRelationship":false},{"name":"suffix","label":"Suffix","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSuffix","isRelationship":false},{"name":"nickname","label":"Nickname","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getNickname","isRelationship":false},{"name":"position","label":"Position","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPosition","isRelationship":false},{"name":"secondaryEmail","label":"Secondary Email","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSecondaryEmail","isRelationship":false},{"name":"workPhone","label":"Work Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getWorkPhone","isRelationship":false},{"name":"homePhone","label":"Home Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getHomePhone","isRelationship":false},{"name":"phoneExtension","label":"Phone Extension","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPhoneExtension","isRelationship":false},{"name":"fax","label":"Fax","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getFax","isRelationship":false},{"name":"website","label":"Website","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getWebsite","isRelationship":false},{"name":"linkedinUrl","label":"LinkedIn URL","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLinkedinUrl","isRelationship":false},{"name":"twitterHandle","label":"Twitter Handle","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTwitterHandle","isRelationship":false},{"name":"profilePictureUrl","label":"ProfilePictureUrl","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfilePictureUrl","isRelationship":false},{"name":"city","label":"City","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCity","isRelationship":false},{"name":"state","label":"State","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getState","isRelationship":false},{"name":"postalCode","label":"Postal Code","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPostalCode","isRelationship":false},{"name":"country","label":"Country","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCountry","isRelationship":false},{"name":"region","label":"Region","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getRegion","isRelationship":false},{"name":"officeLocation","label":"Office Location","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOfficeLocation","isRelationship":false},{"name":"employeeId","label":"Employee ID","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmployeeId","isRelationship":false},{"name":"profiles","label":"Profiles","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfiles","isRelationship":true},{"name":"hireDate","label":"Hire Date","type":"date_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getHireDate","isRelationship":false},{"name":"terminationDate","label":"Termination Date","type":"date_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTerminationDate","isRelationship":false},{"name":"employmentStatus","label":"Employment Status","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmploymentStatus","isRelationship":false},{"name":"costCenter","label":"Cost Center","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCostCenter","isRelationship":false},{"name":"division","label":"Division","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDivision","isRelationship":false},{"name":"businessUnit","label":"Business Unit","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getBusinessUnit","isRelationship":false},{"name":"salaryFrequency","label":"Salary Frequency","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSalaryFrequency","isRelationship":false},{"name":"socialMedias","label":"SocialMedias","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSocialMedias","isRelationship":true},{"name":"tags","label":"Tags","type":"json","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTags","isRelationship":false},{"name":"loginCount","label":"Login Count","type":"integer","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLoginCount","isRelationship":false},{"name":"studentCourses","label":"Student Courses","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getStudentCourses","isRelationship":true},{"name":"lastIpAddress","label":"Last IP Address","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastIpAddress","isRelationship":false},{"name":"visible","label":"Visible","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getVisible","isRelationship":false},{"name":"profileCompleteness","label":"Profile Completeness","type":"integer","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfileCompleteness","isRelationship":false},{"name":"lastActivityAt","label":"Last Activity At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastActivityAt","isRelationship":false},{"name":"status","label":"Status","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getStatus","isRelationship":false},{"name":"talks","label":"Talks","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTalks","isRelationship":true},{"name":"tasks","label":"Tasks","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTasks","isRelationship":true},{"name":"locked","label":"Locked","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLocked","isRelationship":false},{"name":"lockedAt","label":"Locked At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLockedAt","isRelationship":false}]', true),
            'searchableFields' => json_decode('[{"name":"name","label":"Name","type":"string"},{"name":"avatarUrl","label":"AvatarUrl","type":"string"},{"name":"celPhone","label":"CelPhone","type":"string"},{"name":"email","label":"Email","type":"string"},{"name":"password","label":"Password","type":"string"},{"name":"position","label":"Position","type":"string"},{"name":"profilePictureUrl","label":"ProfilePictureUrl","type":"string"}]', true),
            'filterableFields' => json_decode('[]', true),
            'sortableFields' => json_decode('[{"name":"name","label":"Name"},{"name":"agents","label":"Agents"},{"name":"active","label":"Active"},{"name":"avatarUrl","label":"AvatarUrl"},{"name":"birthDate","label":"BirthDate"},{"name":"calendars","label":"Calendars"},{"name":"campaigns","label":"Campaigns"},{"name":"celPhone","label":"CelPhone"},{"name":"contacts","label":"Contacts"},{"name":"deals","label":"Deals"},{"name":"email","label":"Email"},{"name":"emailVerifiedAt","label":"EmailVerifiedAt"},{"name":"eventAttendances","label":"EventAttendances"},{"name":"failedLoginAttempts","label":"FailedLoginAttempts"},{"name":"gender","label":"Gender"},{"name":"lastPasswordChange","label":"LastPasswordChange"},{"name":"managedCampaigns","label":"ManagedCampaigns"},{"name":"managedCompanies","label":"ManagedCompanies"},{"name":"managedContacts","label":"ManagedContacts"},{"name":"managedDeals","label":"ManagedDeals"},{"name":"organizedEvents","label":"OrganizedEvents"},{"name":"ownedCourses","label":"OwnedCourses"},{"name":"password","label":"Password"},{"name":"position","label":"Position"},{"name":"profilePictureUrl","label":"ProfilePictureUrl"},{"name":"profiles","label":"Profiles"},{"name":"socialMedias","label":"SocialMedias"},{"name":"studentCourses","label":"Student Courses"},{"name":"talks","label":"Talks"},{"name":"tasks","label":"Tasks"}]', true),

            // Property metadata for client-side rendering (as JSON strings)
            'list_fields' => '[{"name":"name","label":"Name","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getName","isRelationship":false},{"name":"agents","label":"Agents","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgents","isRelationship":true},{"name":"active","label":"Active","type":"boolean","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getActive","isRelationship":false},{"name":"avatarUrl","label":"AvatarUrl","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAvatarUrl","isRelationship":false},{"name":"birthDate","label":"BirthDate","type":"date_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getBirthDate","isRelationship":false},{"name":"calendars","label":"Calendars","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCalendars","isRelationship":true},{"name":"campaigns","label":"Campaigns","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCampaigns","isRelationship":true},{"name":"celPhone","label":"CelPhone","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCelPhone","isRelationship":false},{"name":"contacts","label":"Contacts","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getContacts","isRelationship":true},{"name":"deals","label":"Deals","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDeals","isRelationship":true},{"name":"email","label":"Email","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmail","isRelationship":false},{"name":"emailVerifiedAt","label":"EmailVerifiedAt","type":"datetime_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmailVerifiedAt","isRelationship":false},{"name":"grantedRoles","label":"Granted Roles","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getGrantedRoles","isRelationship":true},{"name":"eventAttendances","label":"EventAttendances","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEventAttendances","isRelationship":true},{"name":"verified","label":"Verified","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getVerified","isRelationship":false},{"name":"termsSigned","label":"Terms Signed","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTermsSigned","isRelationship":false},{"name":"termsSignedAt","label":"Terms Signed At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTermsSignedAt","isRelationship":false},{"name":"lastLoginAt","label":"Last Login At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastLoginAt","isRelationship":false},{"name":"gender","label":"Gender","type":"integer","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getGender","isRelationship":false},{"name":"lockedUntil","label":"Locked Until","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLockedUntil","isRelationship":false},{"name":"twoFactorEnabled","label":"Two Factor Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTwoFactorEnabled","isRelationship":false},{"name":"lastPasswordChange","label":"LastPasswordChange","type":"datetime_immutable","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastPasswordChange","isRelationship":false},{"name":"lastPasswordChangeAt","label":"Last Password Change At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastPasswordChangeAt","isRelationship":false},{"name":"passwordExpiresAt","label":"Password Expires At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPasswordExpiresAt","isRelationship":false},{"name":"mustChangePassword","label":"Must Change Password","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMustChangePassword","isRelationship":false},{"name":"passkeyEnabled","label":"Passkey Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPasskeyEnabled","isRelationship":false},{"name":"managedCampaigns","label":"ManagedCampaigns","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedCampaigns","isRelationship":true},{"name":"ownedCampaigns","label":"OwnedCampaigns","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOwnedCampaigns","isRelationship":true},{"name":"managedCompanies","label":"ManagedCompanies","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedCompanies","isRelationship":true},{"name":"managedContacts","label":"ManagedContacts","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedContacts","isRelationship":true},{"name":"username","label":"Username","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getUsername","isRelationship":false},{"name":"managedDeals","label":"ManagedDeals","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManagedDeals","isRelationship":true},{"name":"phone","label":"Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPhone","isRelationship":false},{"name":"mobilePhone","label":"Mobile Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMobilePhone","isRelationship":false},{"name":"jobTitle","label":"Job Title","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getJobTitle","isRelationship":false},{"name":"department","label":"Department","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDepartment","isRelationship":false},{"name":"timezone","label":"Timezone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTimezone","isRelationship":false},{"name":"locale","label":"Locale","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLocale","isRelationship":false},{"name":"preferredLanguage","label":"Preferred Language","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPreferredLanguage","isRelationship":false},{"name":"emailNotificationsEnabled","label":"Email Notifications Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmailNotificationsEnabled","isRelationship":false},{"name":"smsNotificationsEnabled","label":"SMS Notifications Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSmsNotificationsEnabled","isRelationship":false},{"name":"calendarSyncEnabled","label":"Calendar Sync Enabled","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCalendarSyncEnabled","isRelationship":false},{"name":"defaultCurrency","label":"Default Currency","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDefaultCurrency","isRelationship":false},{"name":"dateFormat","label":"Date Format","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDateFormat","isRelationship":false},{"name":"manager","label":"Manager","type":"","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getManager","isRelationship":true},{"name":"organizedEvents","label":"OrganizedEvents","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOrganizedEvents","isRelationship":true},{"name":"salesTeam","label":"Sales Team","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSalesTeam","isRelationship":false},{"name":"quotaAmount","label":"Quota Amount","type":"decimal","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getQuotaAmount","isRelationship":false},{"name":"commissionRate","label":"Commission Rate","type":"decimal","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCommissionRate","isRelationship":false},{"name":"agent","label":"Agent","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgent","isRelationship":false},{"name":"agentType","label":"Agent Type","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAgentType","isRelationship":false},{"name":"ownedCourses","label":"OwnedCourses","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOwnedCourses","isRelationship":true},{"name":"deletedAt","label":"Deleted At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDeletedAt","isRelationship":false},{"name":"avatar","label":"Avatar","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getAvatar","isRelationship":false},{"name":"title","label":"Title","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTitle","isRelationship":false},{"name":"firstName","label":"First Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getFirstName","isRelationship":false},{"name":"lastName","label":"Last Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastName","isRelationship":false},{"name":"middleName","label":"Middle Name","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getMiddleName","isRelationship":false},{"name":"suffix","label":"Suffix","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSuffix","isRelationship":false},{"name":"nickname","label":"Nickname","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getNickname","isRelationship":false},{"name":"position","label":"Position","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPosition","isRelationship":false},{"name":"secondaryEmail","label":"Secondary Email","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSecondaryEmail","isRelationship":false},{"name":"workPhone","label":"Work Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getWorkPhone","isRelationship":false},{"name":"homePhone","label":"Home Phone","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getHomePhone","isRelationship":false},{"name":"phoneExtension","label":"Phone Extension","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPhoneExtension","isRelationship":false},{"name":"fax","label":"Fax","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getFax","isRelationship":false},{"name":"website","label":"Website","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getWebsite","isRelationship":false},{"name":"linkedinUrl","label":"LinkedIn URL","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLinkedinUrl","isRelationship":false},{"name":"twitterHandle","label":"Twitter Handle","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTwitterHandle","isRelationship":false},{"name":"profilePictureUrl","label":"ProfilePictureUrl","type":"string","sortable":true,"searchable":true,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfilePictureUrl","isRelationship":false},{"name":"city","label":"City","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCity","isRelationship":false},{"name":"state","label":"State","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getState","isRelationship":false},{"name":"postalCode","label":"Postal Code","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getPostalCode","isRelationship":false},{"name":"country","label":"Country","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCountry","isRelationship":false},{"name":"region","label":"Region","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getRegion","isRelationship":false},{"name":"officeLocation","label":"Office Location","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getOfficeLocation","isRelationship":false},{"name":"employeeId","label":"Employee ID","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmployeeId","isRelationship":false},{"name":"profiles","label":"Profiles","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfiles","isRelationship":true},{"name":"hireDate","label":"Hire Date","type":"date_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getHireDate","isRelationship":false},{"name":"terminationDate","label":"Termination Date","type":"date_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTerminationDate","isRelationship":false},{"name":"employmentStatus","label":"Employment Status","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getEmploymentStatus","isRelationship":false},{"name":"costCenter","label":"Cost Center","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getCostCenter","isRelationship":false},{"name":"division","label":"Division","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getDivision","isRelationship":false},{"name":"businessUnit","label":"Business Unit","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getBusinessUnit","isRelationship":false},{"name":"salaryFrequency","label":"Salary Frequency","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSalaryFrequency","isRelationship":false},{"name":"socialMedias","label":"SocialMedias","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getSocialMedias","isRelationship":true},{"name":"tags","label":"Tags","type":"json","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTags","isRelationship":false},{"name":"loginCount","label":"Login Count","type":"integer","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLoginCount","isRelationship":false},{"name":"studentCourses","label":"Student Courses","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getStudentCourses","isRelationship":true},{"name":"lastIpAddress","label":"Last IP Address","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastIpAddress","isRelationship":false},{"name":"visible","label":"Visible","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getVisible","isRelationship":false},{"name":"profileCompleteness","label":"Profile Completeness","type":"integer","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getProfileCompleteness","isRelationship":false},{"name":"lastActivityAt","label":"Last Activity At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLastActivityAt","isRelationship":false},{"name":"status","label":"Status","type":"string","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getStatus","isRelationship":false},{"name":"talks","label":"Talks","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTalks","isRelationship":true},{"name":"tasks","label":"Tasks","type":"","sortable":true,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getTasks","isRelationship":true},{"name":"locked","label":"Locked","type":"boolean","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLocked","isRelationship":false},{"name":"lockedAt","label":"Locked At","type":"datetime_immutable","sortable":false,"searchable":false,"filterable":false,"filterStrategy":null,"filterBoolean":false,"filterDate":false,"filterNumericRange":false,"filterExists":false,"getter":"getLockedAt","isRelationship":false}]',
            'searchable_fields' => '[{"name":"name","label":"Name","type":"string"},{"name":"avatarUrl","label":"AvatarUrl","type":"string"},{"name":"celPhone","label":"CelPhone","type":"string"},{"name":"email","label":"Email","type":"string"},{"name":"password","label":"Password","type":"string"},{"name":"position","label":"Position","type":"string"},{"name":"profilePictureUrl","label":"ProfilePictureUrl","type":"string"}]',
            'filterable_fields' => '[]',
            'sortable_fields' => '[{"name":"name","label":"Name"},{"name":"agents","label":"Agents"},{"name":"active","label":"Active"},{"name":"avatarUrl","label":"AvatarUrl"},{"name":"birthDate","label":"BirthDate"},{"name":"calendars","label":"Calendars"},{"name":"campaigns","label":"Campaigns"},{"name":"celPhone","label":"CelPhone"},{"name":"contacts","label":"Contacts"},{"name":"deals","label":"Deals"},{"name":"email","label":"Email"},{"name":"emailVerifiedAt","label":"EmailVerifiedAt"},{"name":"eventAttendances","label":"EventAttendances"},{"name":"failedLoginAttempts","label":"FailedLoginAttempts"},{"name":"gender","label":"Gender"},{"name":"lastPasswordChange","label":"LastPasswordChange"},{"name":"managedCampaigns","label":"ManagedCampaigns"},{"name":"managedCompanies","label":"ManagedCompanies"},{"name":"managedContacts","label":"ManagedContacts"},{"name":"managedDeals","label":"ManagedDeals"},{"name":"organizedEvents","label":"OrganizedEvents"},{"name":"ownedCourses","label":"OwnedCourses"},{"name":"password","label":"Password"},{"name":"position","label":"Position"},{"name":"profilePictureUrl","label":"ProfilePictureUrl"},{"name":"profiles","label":"Profiles"},{"name":"socialMedias","label":"SocialMedias"},{"name":"studentCourses","label":"Student Courses"},{"name":"talks","label":"Talks"},{"name":"tasks","label":"Tasks"}]',
        ]);
    }

    // ====================================
    // API SEARCH - Fetch Users for list view
    // ====================================

    /**
     * API endpoint for searching Users
     */
    protected function apiSearchAction(Request $request): JsonResponse
    {
        $this->denyAccessUnlessGranted(UserVoter::LIST);

        // Delegate to parent BaseApiController which handles
        // search, filtering, sorting, and pagination
        return parent::apiSearchAction($request);
    }

    // ====================================
    // NEW FORM ACTION - Display create form
    // ====================================

    /**
     * Display new user form
     */
    protected function newFormAction(Request $request): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::CREATE);

        $user = new User();

        // Initialize with custom logic if needed
        $this->initializeNewEntity($user);

        $form = $this->createForm(UserType::class, $user);

        return $this->render('user/_form_modal.html.twig', [
            'form' => $form,
            'user' => $user,
            'is_edit' => false,
        ]);
    }

    // ====================================
    // CREATE ACTION - Process create form submission
    // ====================================

    /**
     * Process new user form submission
     */
    protected function createAction(Request $request): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::CREATE);

        $user = new User();

        // Initialize with custom logic if needed
        $this->initializeNewEntity($user);

        $form = $this->createForm(UserType::class, $user);
        $form->handleRequest($request);

        if ($form->isSubmitted() && $form->isValid()) {
            try {
                // Before create hook
                $this->beforeCreate($user);

                $this->entityManager->persist($user);
                $this->entityManager->flush();

                // After create hook
                $this->afterCreate($user);

                $this->addFlash('success', $this->translator->trans(
                    'user.flash.created_successfully',
                    ['%name%' => (string) $user],
                    'user'
                ));

                return $this->redirectToRoute('user_index', [], Response::HTTP_SEE_OTHER);

            } catch (\Exception $e) {
                $this->addFlash('error', $this->translator->trans(
                    'user.flash.create_failed',
                    ['%error%' => $e->getMessage()],
                    'user'
                ));
            }
        }

        // Re-render with errors
        return $this->render('user/_form_modal.html.twig', [
            'form' => $form,
            'user' => $user,
            'is_edit' => false,
        ], new Response('', $form->isSubmitted() ? Response::HTTP_UNPROCESSABLE_ENTITY : Response::HTTP_OK));
    }

    // ====================================
    // EDIT FORM ACTION - Display edit form
    // ====================================

    /**
     * Display edit user form
     */
    protected function editFormAction(User $user, Request $request): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::EDIT, $user);

        $form = $this->createForm(UserType::class, $user);

        return $this->render('user/_form_modal.html.twig', [
            'form' => $form,
            'user' => $user,
            'is_edit' => true,
        ]);
    }

    // ====================================
    // UPDATE ACTION - Process edit form submission
    // ====================================

    /**
     * Process edit user form submission
     */
    protected function updateAction(User $user, Request $request): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::EDIT, $user);

        $form = $this->createForm(UserType::class, $user);
        $form->handleRequest($request);

        if ($form->isSubmitted() && $form->isValid()) {
            try {
                // Before update hook
                $this->beforeUpdate($user);

                $this->entityManager->flush();

                // After update hook
                $this->afterUpdate($user);

                $this->addFlash('success', $this->translator->trans(
                    'user.flash.updated_successfully',
                    ['%name%' => (string) $user],
                    'user'
                ));

                return $this->redirectToRoute('user_index', [], Response::HTTP_SEE_OTHER);

            } catch (\Exception $e) {
                $this->addFlash('error', $this->translator->trans(
                    'user.flash.update_failed',
                    ['%error%' => $e->getMessage()],
                    'user'
                ));
            }
        }

        // Re-render with errors
        return $this->render('user/_form_modal.html.twig', [
            'form' => $form,
            'user' => $user,
            'is_edit' => true,
        ], new Response('', $form->isSubmitted() ? Response::HTTP_UNPROCESSABLE_ENTITY : Response::HTTP_OK));
    }

    // ====================================
    // DELETE ACTION - Delete user
    // ====================================

    /**
     * Delete user
     */
    protected function deleteAction(User $user, Request $request): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::DELETE, $user);

        // Verify CSRF token
        $token = $request->request->get('_token');
        if (!$this->csrfTokenManager->isTokenValid(new CsrfToken('delete_user_' . $user->getId()->toString(), $token))) {
            throw new InvalidCsrfTokenException('Invalid CSRF token for delete operation.');
        }

        try {
            // Before delete hook
            $this->beforeDelete($user);

            $name = (string) $user;

            $this->entityManager->remove($user);
            $this->entityManager->flush();

            // After delete hook
            $this->afterDelete();

            $this->addFlash('success', $this->translator->trans(
                'user.flash.deleted_successfully',
                ['%name%' => $name],
                'user'
            ));

        } catch (\Exception $e) {
            $this->addFlash('error', $this->translator->trans(
                'user.flash.delete_failed',
                ['%error%' => $e->getMessage()],
                'user'
            ));
        }

        return $this->redirectToRoute('user_index', [], Response::HTTP_SEE_OTHER);
    }

    // ====================================
    // SHOW ACTION - Display user details
    // ====================================

    /**
     * Display user details
     */
    protected function showAction(User $user): Response
    {
        $this->denyAccessUnlessGranted(UserVoter::VIEW, $user);

        return $this->render('user/show.html.twig', [
            'user' => $user,
        ]);
    }

    // ====================================
    // LIFECYCLE HOOKS
    // ====================================
    // Override these in UserController to add custom logic

    /**
     * Initialize new entity before creating form
     *
     * Note: Organization and Owner are set automatically by TenantEntityProcessor
     * Only use this for custom initialization logic
     */
    protected function initializeNewEntity(User $user): void
    {
        // Organization and Owner are set automatically by TenantEntityProcessor
        // Add your custom initialization here
    }

    /**
     * Execute logic before creating entity
     */
    protected function beforeCreate(User $user): void
    {
        // Override to add logic before create
    }

    /**
     * Execute logic after creating entity
     */
    protected function afterCreate(User $user): void
    {
        // Override to add logic after create (e.g., send notification, trigger event)
    }

    /**
     * Execute logic before updating entity
     */
    protected function beforeUpdate(User $user): void
    {
        // Override to add logic before update
    }

    /**
     * Execute logic after updating entity
     */
    protected function afterUpdate(User $user): void
    {
        // Override to add logic after update (e.g., send notification, trigger event)
    }

    /**
     * Execute logic before deleting entity
     */
    protected function beforeDelete(User $user): void
    {
        // Override to add logic before delete (e.g., check dependencies, archive)
    }

    /**
     * Execute logic after deleting entity
     */
    protected function afterDelete(): void
    {
        // Override to add logic after delete (e.g., cleanup, send notification)
    }
}
