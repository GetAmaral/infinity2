<?php

declare(strict_types=1);

namespace App\Form\Generated;

use App\Entity\Product;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Symfony\Component\Form\Extension\Core\Type\TextType;
use Symfony\Component\Form\Extension\Core\Type\TextareaType;
use Symfony\Component\Form\Extension\Core\Type\CheckboxType;
use Symfony\Component\Form\Extension\Core\Type\ChoiceType;
use Symfony\Component\Form\Extension\Core\Type\CollectionType;
use Symfony\Component\Form\Extension\Core\Type\IntegerType;
use Symfony\Bridge\Doctrine\Form\Type\EntityType;
use Symfony\Component\Form\Extension\Core\Type\DateType;
use App\Entity\BillingFrequency;
use App\Entity\Brand;
use App\Entity\ProductCategory;
use App\Entity\Deal;
use App\Entity\Company;
use App\Entity\ProductLine;
use App\Entity\Tag;
use App\Entity\TaxCategory;
use Symfony\Contracts\Translation\TranslatorInterface;

/**
 * Generated Base Form for Product
 *
 * ⚠️ WARNING: This file is ALWAYS regenerated by Genmax
 * DO NOT EDIT THIS FILE - Edit ProductType instead
 *
 * @generated by Genmax
 * @codeCoverageIgnore
 */
abstract class ProductTypeGenerated extends AbstractType
{
    public function __construct(
        protected readonly TranslatorInterface $translator
    ) {}

    public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        $builder->add('sku', TextType::class, [
            'label' => 'SKU',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter sku',
            ],
        ]);

        $builder->add('name', TextType::class, [
            'label' => 'Name',
            'required' => true,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter name',
            ],
        ]);

        $builder->add('description', TextareaType::class, [
            'label' => 'Description',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter description',
            ],
        ]);

        $builder->add('gtin', TextType::class, [
            'label' => 'GTIN',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter gtin',
            ],
        ]);

        $builder->add('upc', TextType::class, [
            'label' => 'UPC',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter upc',
            ],
        ]);

        $builder->add('ean', TextType::class, [
            'label' => 'EAN',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter ean',
            ],
        ]);

        $builder->add('mpn', TextType::class, [
            'label' => 'MPN',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter mpn',
            ],
        ]);

        $builder->add('barcode', TextType::class, [
            'label' => 'Barcode',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter barcode',
            ],
        ]);

        $builder->add('available', CheckboxType::class, [
            'label' => 'Available',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('price', TextType::class, [
            'label' => 'Price',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter price',
            ],
        ]);

        $builder->add('compareAtPrice', TextType::class, [
            'label' => 'Compare At Price',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter compare at price',
            ],
        ]);

        $builder->add('status', ChoiceType::class, [
            'label' => 'Status',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        // Exclude nested collections when form is used inside another collection
        if (empty($options['exclude_parent'])) {
        $builder->add('attachments', CollectionType::class, [
            'label' => 'Attachments',
            'required' => false,
            'entry_type' => \App\Form\AttachmentType::class,
            'entry_options' => [
                'label' => false,
                'exclude_parent' => true,
            ],
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false,
            'prototype' => true,
            'attr' => [
                'data-controller' => 'live-collection',
                'data-live-collection-allow-add-value' => '1',
                'data-live-collection-allow-delete-value' => '1',
                'data-live-collection-max-items-value' => '99',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        $builder->add('reorderLevel', IntegerType::class, [
            'label' => 'Reorder Level',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('reorderQuantity', IntegerType::class, [
            'label' => 'Reorder Quantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('leadTime', IntegerType::class, [
            'label' => 'Lead Time (days)',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('active', CheckboxType::class, [
            'label' => 'Active',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('minOrderQuantity', IntegerType::class, [
            'label' => 'Min Order Quantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('maxOrderQuantity', IntegerType::class, [
            'label' => 'Max Order Quantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('availableQuantity', IntegerType::class, [
            'label' => 'AvailableQuantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        // Exclude nested collections when form is used inside another collection
        if (empty($options['exclude_parent'])) {
        $builder->add('batches', CollectionType::class, [
            'label' => 'Batches',
            'required' => false,
            'entry_type' => \App\Form\ProductBatchType::class,
            'entry_options' => [
                'label' => false,
                'exclude_parent' => true,
            ],
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false,
            'prototype' => true,
            'attr' => [
                'data-controller' => 'live-collection',
                'data-live-collection-allow-add-value' => '1',
                'data-live-collection-allow-delete-value' => '1',
                'data-live-collection-max-items-value' => '99',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        // Conditionally exclude parent back-reference to prevent circular references in collections
        if (empty($options['exclude_parent'])) {
        $builder->add('billingFrequency', EntityType::class, [
            'label' => 'BillingFrequency',
            'required' => false,
            'class' => \App\Entity\BillingFrequency::class,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'BillingFrequency',
                'data-relation-select-route-value' => 'billing_frequency_api_search',
                'data-relation-select-add-route-value' => 'billing_frequency_new_modal',
                'data-relation-select-multiple-value' => 'false',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select billingfrequency',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        // Conditionally exclude parent back-reference to prevent circular references in collections
        if (empty($options['exclude_parent'])) {
        $builder->add('brand', EntityType::class, [
            'label' => 'Brand',
            'required' => false,
            'class' => \App\Entity\Brand::class,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Brand',
                'data-relation-select-route-value' => 'brand_api_search',
                'data-relation-select-add-route-value' => 'brand_new_modal',
                'data-relation-select-multiple-value' => 'false',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select brand',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        $builder->add('cancellationFee', TextType::class, [
            'label' => 'CancellationFee',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter cancellationfee',
            ],
        ]);

        // Conditionally exclude parent back-reference to prevent circular references in collections
        if (empty($options['exclude_parent'])) {
        $builder->add('category', EntityType::class, [
            'label' => 'Category',
            'required' => false,
            'class' => \App\Entity\ProductCategory::class,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'ProductCategory',
                'data-relation-select-route-value' => 'product_category_api_search',
                'data-relation-select-add-route-value' => 'product_category_new_modal',
                'data-relation-select-multiple-value' => 'false',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select productcategory',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        $builder->add('commissionAmount', TextType::class, [
            'label' => 'CommissionAmount',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter commissionamount',
            ],
        ]);

        $builder->add('commissionRate', TextType::class, [
            'label' => 'CommissionRate',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter commissionrate',
            ],
        ]);

        $builder->add('costPrice', TextType::class, [
            'label' => 'CostPrice',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter costprice',
            ],
        ]);

        $builder->add('currency', TextType::class, [
            'label' => 'Currency',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter currency',
            ],
        ]);

        $builder->add('customFields', TextareaType::class, [
            'label' => 'CustomFields',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter customfields',
            ],
        ]);

        $builder->add('deals', EntityType::class, [
            'label' => 'Deals',
            'required' => false,
            'class' => \App\Entity\Deal::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Deal',
                'data-relation-select-route-value' => 'deal_api_search',
                'data-relation-select-add-route-value' => 'deal_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more deal',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('dimensions', TextType::class, [
            'label' => 'Dimensions',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter dimensions',
            ],
        ]);

        $builder->add('discountAmount', TextType::class, [
            'label' => 'DiscountAmount',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter discountamount',
            ],
        ]);

        $builder->add('discountPercentage', TextType::class, [
            'label' => 'DiscountPercentage',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter discountpercentage',
            ],
        ]);

        $builder->add('endOfLifeDate', DateType::class, [
            'label' => 'EndOfLifeDate',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('exchangeRate', TextType::class, [
            'label' => 'ExchangeRate',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter exchangerate',
            ],
        ]);

        $builder->add('features', TextareaType::class, [
            'label' => 'Features',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter features',
            ],
        ]);

        $builder->add('launchDate', DateType::class, [
            'label' => 'LaunchDate',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('lifecycleStage', TextType::class, [
            'label' => 'LifecycleStage',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter lifecyclestage',
            ],
        ]);

        $builder->add('listPrice', TextType::class, [
            'label' => 'ListPrice',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter listprice',
            ],
        ]);

        $builder->add('manufacturer', EntityType::class, [
            'label' => 'Manufacturer',
            'required' => false,
            'class' => \App\Entity\Company::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Company',
                'data-relation-select-route-value' => 'company_api_search',
                'data-relation-select-add-route-value' => 'company_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more company',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('marginPercentage', TextType::class, [
            'label' => 'MarginPercentage',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter marginpercentage',
            ],
        ]);

        $builder->add('maximumDiscount', TextType::class, [
            'label' => 'MaximumDiscount',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter maximumdiscount',
            ],
        ]);

        $builder->add('minimumPrice', TextType::class, [
            'label' => 'MinimumPrice',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter minimumprice',
            ],
        ]);

        $builder->add('productCode', TextType::class, [
            'label' => 'ProductCode',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter productcode',
            ],
        ]);

        // Conditionally exclude parent back-reference to prevent circular references in collections
        if (empty($options['exclude_parent'])) {
        $builder->add('productLine', EntityType::class, [
            'label' => 'ProductLine',
            'required' => false,
            'class' => \App\Entity\ProductLine::class,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'ProductLine',
                'data-relation-select-route-value' => 'product_line_api_search',
                'data-relation-select-add-route-value' => 'product_line_new_modal',
                'data-relation-select-multiple-value' => 'false',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select productline',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        $builder->add('productType', IntegerType::class, [
            'label' => 'ProductType',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('purchasable', CheckboxType::class, [
            'label' => 'Purchasable',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('recurringFee', TextType::class, [
            'label' => 'RecurringFee',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter recurringfee',
            ],
        ]);

        $builder->add('relatedFrom', EntityType::class, [
            'label' => 'RelatedFrom',
            'required' => false,
            'class' => \App\Entity\Product::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Product',
                'data-relation-select-route-value' => 'product_api_search',
                'data-relation-select-add-route-value' => 'product_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more product',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('relatedTo', EntityType::class, [
            'label' => 'RelatedTo',
            'required' => false,
            'class' => \App\Entity\Product::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Product',
                'data-relation-select-route-value' => 'product_api_search',
                'data-relation-select-add-route-value' => 'product_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more product',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('requiresApproval', CheckboxType::class, [
            'label' => 'RequiresApproval',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('reservedQuantity', IntegerType::class, [
            'label' => 'ReservedQuantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('sellable', CheckboxType::class, [
            'label' => 'Sellable',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('setupFee', TextType::class, [
            'label' => 'SetupFee',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter setupfee',
            ],
        ]);

        $builder->add('shortDescription', TextareaType::class, [
            'label' => 'ShortDescription',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter shortdescription',
            ],
        ]);

        $builder->add('specifications', TextareaType::class, [
            'label' => 'Specifications',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter specifications',
            ],
        ]);

        $builder->add('stockQuantity', IntegerType::class, [
            'label' => 'StockQuantity',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('subscription', CheckboxType::class, [
            'label' => 'Subscription',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('subscriptionPeriod', TextType::class, [
            'label' => 'SubscriptionPeriod',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter subscriptionperiod',
            ],
        ]);

        $builder->add('substituteFrom', EntityType::class, [
            'label' => 'SubstituteFrom',
            'required' => false,
            'class' => \App\Entity\Product::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Product',
                'data-relation-select-route-value' => 'product_api_search',
                'data-relation-select-add-route-value' => 'product_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more product',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('substituteTo', EntityType::class, [
            'label' => 'SubstituteTo',
            'required' => false,
            'class' => \App\Entity\Product::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Product',
                'data-relation-select-route-value' => 'product_api_search',
                'data-relation-select-add-route-value' => 'product_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more product',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('supplier', EntityType::class, [
            'label' => 'Supplier',
            'required' => false,
            'class' => \App\Entity\Company::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Company',
                'data-relation-select-route-value' => 'company_api_search',
                'data-relation-select-add-route-value' => 'company_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more company',
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('supportPeriod', IntegerType::class, [
            'label' => 'SupportPeriod',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('tags', EntityType::class, [
            'label' => 'Tags',
            'required' => false,
            'class' => \App\Entity\Tag::class,
            'multiple' => true,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'Tag',
                'data-relation-select-route-value' => 'tag_api_search',
                'data-relation-select-add-route-value' => 'tag_new_modal',
                'data-relation-select-multiple-value' => 'true',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select one or more tag',
                'class' => 'form-input-modern',
            ],
        ]);

        // Conditionally exclude parent back-reference to prevent circular references in collections
        if (empty($options['exclude_parent'])) {
        $builder->add('taxCategory', EntityType::class, [
            'label' => 'TaxCategory',
            'required' => false,
            'class' => \App\Entity\TaxCategory::class,
            'query_builder' => function (\Doctrine\ORM\EntityRepository $er) {
                $qb = $er->createQueryBuilder('e');

                // Determine best field to sort by
                $metadata = $er->getClassMetadata();
                $sortField = 'id';
                foreach (['name', 'title', 'label', 'slug', 'subject'] as $field) {
                    if ($metadata->hasField($field)) {
                        $sortField = $field;
                        break;
                    }
                }

                // Use LOWER() for case-insensitive sorting
                return $qb->orderBy('LOWER(e.' . $sortField . ')', 'ASC');
            },
            'attr' => [
                'data-controller' => 'relation-select',
                'data-relation-select-entity-value' => 'TaxCategory',
                'data-relation-select-route-value' => 'tax_category_api_search',
                'data-relation-select-add-route-value' => 'tax_category_new_modal',
                'data-relation-select-multiple-value' => 'false',
                'data-relation-select-one-to-one-value' => 'false',
                'placeholder' => 'Select taxcategory',
                'class' => 'form-input-modern',
            ],
        ]);
        }

        $builder->add('unitOfMeasure', TextType::class, [
            'label' => 'UnitOfMeasure',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter unitofmeasure',
            ],
        ]);

        $builder->add('warrantyPeriod', IntegerType::class, [
            'label' => 'WarrantyPeriod',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
            ],
        ]);

        $builder->add('weight', TextType::class, [
            'label' => 'Weight',
            'required' => false,
            'attr' => [
                'class' => 'form-input-modern',
                'placeholder' => 'Enter weight',
            ],
        ]);

    }

    public function configureOptions(OptionsResolver $resolver): void
    {
        $resolver->setDefaults([
            'data_class' => Product::class,
            'exclude_parent' => false,  // Set to true to exclude parent back-refs and nested collections (prevents circular refs)
        ]);
    }
}
