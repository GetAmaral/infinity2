# API Platform 4 Configuration for Talk
# This file is ALWAYS regenerated by Genmax. DO NOT edit manually.
# @generated by Genmax Code Generator

resources:
  App\Entity\Talk:
    shortName: Talk
    description: "Communication threads with customers and prospects"

    # DTO configuration - processor is set per-operation to avoid affecting DELETE
    output: App\Dto\TalkOutputDto

    normalizationContext:
      groups: ["talk:read"]

    denormalizationContext:
      groups: ["talk:write"]

    order:
      createdAt: DESC

    security: "is_granted('ROLE_SUPPORT_ADMIN')"

    operations:
      - class: ApiPlatform\Metadata\GetCollection
        security: "is_granted('ROLE_SUPPORT_ADMIN')"
      - class: ApiPlatform\Metadata\Get
        security: "is_granted('ROLE_SUPPORT_ADMIN')"
      - class: ApiPlatform\Metadata\Post
        input: App\Dto\TalkInputDto
        processor: App\State\TalkProcessor
        security: "is_granted('ROLE_SUPPORT_ADMIN')"
      - class: ApiPlatform\Metadata\Put
        input: App\Dto\TalkInputDto
        processor: App\State\TalkProcessor
        security: "is_granted('ROLE_SUPPORT_ADMIN')"
      - class: ApiPlatform\Metadata\Patch
        input: App\Dto\TalkInputDto
        processor: App\State\TalkProcessor
        security: "is_granted('ROLE_SUPPORT_ADMIN')"
      - class: ApiPlatform\Metadata\Delete
        security: "is_granted('ROLE_SUPPORT_ADMIN')"


    # Property-level configuration
    properties:
      organization:
        description: "Organization"
        example: "/api/organizatia/01234567-89ab-cdef-0123-456789abcdef"
      talkFlow:
        description: "Talk Flow"
        example: "{\"key\": \"value\"}"
      subject:
        description: "Subject (text field)"
        example: "Sample longer text value"
        # Advanced filters
        filters:
          - type: OrderFilter
      talkType:
        description: "TalkType"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      summary:
        description: "Summary (long text)"
        example: "This is a longer text field with more content"
        # Advanced filters
        filters:
          - type: OrderFilter
      messageCount:
        writable: false
        description: "Message Count (numeric value)"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      contact:
        description: "Contact"
        example: "/api/contacts/01234567-89ab-cdef-0123-456789abcdef"
      company:
        description: "Company"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      deal:
        description: "Deal"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      users:
        description: "Users"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      agents:
        description: "Agents"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      owner:
        description: "Owner"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      assignedTo:
        description: "Assigned To"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      status:
        description: "Current status"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      channel:
        description: "Channel (numeric value)"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      priority:
        description: "Priority level"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      outcome:
        description: "Outcome (numeric value)"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      sentiment:
        description: "Sentiment (text field)"
        example: "Sample text"
        # Advanced filters
        filters:
          - type: OrderFilter
      dateStart:
        description: "DateStart (date and time)"
        example: "2025-01-15T10:30:00Z"
        # Advanced filters
        filters:
          - type: OrderFilter
      dateLastMessage:
        description: "DateLastMessage (date and time)"
        example: "2025-01-15T10:30:00Z"
        # Advanced filters
        filters:
          - type: OrderFilter
      closedAt:
        description: "Closed At (date and time)"
        example: "2025-01-15T10:30:00Z"
        # Advanced filters
        filters:
          - type: OrderFilter
      durationSeconds:
        description: "DurationSeconds (numeric value)"
        example: "42"
        # Advanced filters
        filters:
          - type: OrderFilter
      paused:
        description: "Paused"
        example: false
      pausedAt:
        description: "Paused At"
        example: "2025-01-15T10:30:00Z"
      pausedReason:
        description: "Paused Reason"
        example: "Sample paused reason"
      resumedAt:
        description: "Resumed At"
        example: "2025-01-15T10:30:00Z"
      campaigns:
        description: "Campaigns"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      recordingUrl:
        description: "RecordingUrl (text field)"
        example: "Sample longer text value"
        # Advanced filters
        filters:
          - type: OrderFilter
      archived:
        description: "IsArchived (yes\/no)"
        example: "true"
        # Advanced filters
        filters:
          - type: OrderFilter
      internal:
        description: "Is Internal (yes\/no)"
        example: "true"
        # Advanced filters
        filters:
          - type: OrderFilter
      messages:
        description: "Messages"
        example: "sample value"
        # Advanced filters
        filters:
          - type: OrderFilter
      tags:
        description: "Tags (JSON data)"
        example: "{\"key\": \"value\"}"
