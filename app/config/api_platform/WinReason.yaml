# API Platform 4 Configuration for WinReason
# This file is ALWAYS regenerated by Genmax. DO NOT edit manually.
# @generated by Genmax Code Generator

resources:
  App\Entity\WinReason:
    shortName: WinReason
    description: "Tracks reasons for won deals to analyze success patterns and competitive positioning"

    input: App\Dto\WinReasonInputDto
    output: App\Dto\WinReasonOutputDto
    processor: App\State\WinReasonProcessor

    normalizationContext:
      groups: ["winreason:read"]

    denormalizationContext:
      groups: ["winreason:write"]

    order:
      sortOrder: ASC
      name: ASC

    security: "is_granted('ROLE_ORGANIZATION_ADMIN')"

    operations:
      - class: ApiPlatform\Metadata\GetCollection
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Get
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Post
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Put
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Patch
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Delete
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"


    # Property-level configuration
    properties:
      organization:
        description: "Organization"
        example: "/api/organizations/01234567-89ab-cdef-0123-456789abcdef"
      name:
        description: "The brand name"
        example: "Nike"
      description:
        description: "..."
        example: "..."
      category:
        description: "Category of the win reason to group similar reasons for analysis (e.g., PRICING, PRODUCT_FEATURES, CUSTOMER_SERVICE)"
        example: "PRODUCT_FEATURES"
      sortOrder:
        description: "Numeric value to control display order of win reasons in dropdowns and lists"
        example: "10"
      impactScore:
        description: "Numeric score (0.00 to 100.00) representing the business impact of this win reason on deal closure"
        example: "85.50"
        # Advanced filters
        filters:
          - type: NumericFilter
      usageCount:
        writable: false
        description: "Number of times this win reason has been used in won deals (automatically incremented)"
        example: "42"
        # Advanced filters
        filters:
          - type: NumericFilter
      lastUsedAt:
        writable: false
        description: "Timestamp of when this win reason was last used in a won deal"
        example: "2025-10-15T14:30:00+00:00"
        # Advanced filters
        filters:
          - type: DateFilter
      competitorRelated:
        description: "Indicates whether this win reason is related to competitive advantages over specific competitors"
        example: "true"
        # Advanced filters
        filters:
          - type: BooleanFilter
      primaryCompetitor:
        description: "Name of the primary competitor that this win reason helped defeat (if competitor related)"
        example: "Salesforce"
      dealValueImpact:
        description: "Expected impact on deal value\/size when this win reason is the primary factor (HIGH, MEDIUM, LOW, NEUTRAL)"
        example: "HIGH"
      color:
        description: "Hex color code for visual representation in charts and UI elements (e.g., #28a745 for green)"
        example: "#28a745"
      tags:
        description: "Array of tags for flexible categorization and filtering (e.g., [\"enterprise\", \"technical\", \"strategic\"])"
        example: "[\"enterprise\", \"technical\", \"roi-focused\"]"
      active:
        description: "Whether this win reason is currently active and available for selection in deals"
        example: "true"
        # Advanced filters
        filters:
          - type: BooleanFilter
      notes:
        description: "Internal notes for sales team about when and how to use this win reason effectively"
        example: "Use this reason when customer specifically mentions our analytics capabilities as decision factor. Common in enterprise deals where data-driven insights are critical."
      requiresApproval:
        description: "Whether using this win reason requires manager approval (for high-value or strategic wins)"
        example: "false"
        # Advanced filters
        filters:
          - type: BooleanFilter
      deals:
        writable: false
        description: "Collection of deals that were won using this reason"
        example: "\/api\/deals?winReason=\/api\/win_reasons\/0199cadd-6423-78bb-9621-908c082af885"
