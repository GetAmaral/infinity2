# API Platform 4 Configuration for Holiday
# This file is ALWAYS regenerated by Genmax. DO NOT edit manually.
# @generated by Genmax Code Generator

resources:
  App\Entity\Holiday:
    shortName: Holiday
    description: "Company and regional holidays"

    # DTO configuration - processor is set per-operation to avoid affecting DELETE
    output: App\Dto\HolidayOutputDto

    normalizationContext:
      groups: ["holiday:read"]

    denormalizationContext:
      groups: ["holiday:write"]

    order:
      createdAt: DESC

    security: "is_granted('ROLE_ORGANIZATION_ADMIN')"

    operations:
      - class: ApiPlatform\Metadata\GetCollection
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Get
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Post
        input: App\Dto\HolidayInputDto
        processor: App\State\HolidayProcessor
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Put
        input: App\Dto\HolidayInputDto
        processor: App\State\HolidayProcessor
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Patch
        input: App\Dto\HolidayInputDto
        processor: App\State\HolidayProcessor
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"
      - class: ApiPlatform\Metadata\Delete
        security: "is_granted('ROLE_ORGANIZATION_ADMIN')"


    # Property-level configuration
    properties:
      organization:
        description: "Organization"
        example: "/api/organizations/01234567-89ab-cdef-0123-456789abcdef"
      name:
        description: "The brand name"
        example: "Nike"
        # Advanced filters
        filters:
          - type: SearchFilter
            strategy: partial
      description:
        description: "..."
        example: "..."
      recurring:
        description: "Whether this holiday recurs annually on the same date"
        example: "true"
        # Advanced filters
        filters:
          - type: BooleanFilter
      blocksScheduling:
        description: "Whether this holiday blocks scheduling and calendar operations"
        example: "true"
      observed:
        description: "Whether this is an observed holiday (moved from weekend to business day)"
        example: "false"
        # Advanced filters
        filters:
          - type: BooleanFilter
      active:
        description: "Whether this holiday is currently active and should be considered in scheduling"
        example: "true"
        # Advanced filters
        filters:
          - type: BooleanFilter
      country:
        description: "ISO 3166-1 alpha-2 country code where this holiday is observed"
        example: "US"
        # Advanced filters
        filters:
          - type: SearchFilter
            strategy: partial
      calendar:
        description: "The calendar to which this holiday belongs"
        example: "\/api\/calendars\/0199cadd-5678-7bcb-a551-8ede90d819b3"
      region:
        description: "Specific region or state within the country where this holiday applies (e.g., California, Texas)"
        example: "California"
        # Advanced filters
        filters:
          - type: SearchFilter
            strategy: partial
      year:
        description: "Specific year for non-recurring holidays or to override recurring holiday dates"
        example: "2025"
        # Advanced filters
        filters:
          - type: NumericFilter
      event:
        description: "The event associated with this holiday occurrence"
        example: "\/api\/events\/0199cadd-9abc-7bcb-a551-8ede90d819b3"
      holidayType:
        description: "Type of holiday: national, regional, religious, bank, custom"
        example: "national"
        # Advanced filters
        filters:
          - type: SearchFilter
            strategy: partial
      originalDate:
        description: "Original date of the holiday before being observed on a different day (e.g., when moved from weekend)"
        example: "2025-12-26"
        # Advanced filters
        filters:
          - type: DateFilter
      affectsSLA:
        description: "Whether this holiday should pause or affect Service Level Agreement calculations"
        example: "true"
        # Advanced filters
        filters:
          - type: BooleanFilter
      sentAt:
        description: "The date when the holiday is observed"
        example: "2025-12-25"
        # Advanced filters
        filters:
          - type: DateFilter
      workingDay:
        description: "Whether this is a partial working day (half-day holiday)"
        example: "false"
        # Advanced filters
        filters:
          - type: BooleanFilter
      notes:
        description: "Additional notes or special instructions for this holiday"
        example: "Office will be closed. Emergency contact available."
      startTime:
        description: "Start time for partial day holidays or special observance hours"
        example: "00:00:00"
      endTime:
        description: "End time for partial day holidays or special observance hours"
        example: "23:59:59"
