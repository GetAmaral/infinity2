# API Platform 4 Configuration for TalkMessage
# This file is ALWAYS regenerated by Genmax. DO NOT edit manually.
# @generated by Genmax Code Generator

resources:
  App\Entity\TalkMessage:
    shortName: TalkMessage
    description: "Individual messages within communication threads"

    # DTO configuration - processor is set per-operation to avoid affecting DELETE
    output: App\Dto\TalkMessageOutputDto

    normalizationContext:
      groups: ["talkmessage:read"]

    denormalizationContext:
      groups: ["talkmessage:write"]

    order:
      createdAt: DESC

    security: "is_granted('ROLE_SUPPORT_AGENT')"

    operations:
      - class: ApiPlatform\Metadata\GetCollection
        security: "is_granted('ROLE_SUPPORT_AGENT')"
      - class: ApiPlatform\Metadata\Get
        security: "is_granted('ROLE_SUPPORT_AGENT')"
      - class: ApiPlatform\Metadata\Post
        input: App\Dto\TalkMessageInputDto
        processor: App\State\TalkMessageProcessor
        security: "is_granted('ROLE_SUPPORT_AGENT')"
      - class: ApiPlatform\Metadata\Put
        input: App\Dto\TalkMessageInputDto
        processor: App\State\TalkMessageProcessor
        security: "is_granted('ROLE_SUPPORT_AGENT')"
      - class: ApiPlatform\Metadata\Patch
        input: App\Dto\TalkMessageInputDto
        processor: App\State\TalkMessageProcessor
        security: "is_granted('ROLE_SUPPORT_AGENT')"
      - class: ApiPlatform\Metadata\Delete
        security: "is_granted('ROLE_SUPPORT_AGENT')"


    # Property-level configuration
    properties:
      organization:
        description: "Organization"
        example: "/api/organizations/01234567-89ab-cdef-0123-456789abcdef"
      talk:
        description: "Talk"
        example: "sample value"
      fromContact:
        description: "FromContact"
        example: "sample value"
      fromUser:
        description: "FromUser"
        example: "sample value"
      fromAgent:
        description: "FromAgent"
        example: "sample value"
      sentAt:
        description: "Sent At (date and time)"
        example: "2025-01-15T10:30:00Z"
      body:
        description: "Message Body (long text)"
        example: "This is a longer text field with more content"
      messageType:
        description: "Message Type (text field)"
        example: "Sample longer text value"
      attachments:
        description: "Attachments"
        example: "sample value"
      read:
        description: "Is Read (yes\/no)"
        example: "true"
      readAt:
        description: "ReadAt (date and time)"
        example: "2025-01-15T10:30:00Z"
      sentiment:
        description: "Sentiment (text field)"
        example: "Sample longer text value"
      parentMessage:
        description: "ParentMessage"
        example: "sample value"
      edited:
        description: "Edited (yes\/no)"
        example: "true"
      notification:
        description: "Notification"
        example: "sample value"
      direction:
        description: "Direction (text field)"
        example: "Sample longer text value"
      deliveredAt:
        description: "Delivered At (date and time)"
        example: "2025-01-15T10:30:00Z"
      internal:
        description: "Is Internal Note (yes\/no)"
        example: "true"
      system:
        writable: false
        description: "Is System Message (yes\/no)"
        example: "true"
      editedAt:
        description: "Edited At (date and time)"
        example: "2025-01-15T10:30:00Z"
      channel:
        description: "Communication Channel (text field)"
        example: "Sample longer text value"
      subject:
        description: "Subject (text field)"
        example: "Sample longer text value"
      metadata:
        description: "Metadata (JSON data)"
        example: "{\"key\": \"value\"}"
